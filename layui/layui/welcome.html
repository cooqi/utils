<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>欢迎页面</title>
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
        <link rel="stylesheet" href="./css/font.css">
        <link rel="stylesheet" href="./css/xadmin.css">
        <script type="text/javascript" src="./js/jquery.min.js"></script>
        <script type="text/javascript" src="./js/api.js"></script>
        <style>
            .echarts{background: rgba(255,255,255,.3);width: 100%;overflow: hidden}
            .echarts .echartBox{float: left}
        </style>
    </head>
    <body>
        <div class="x-body" ms-controller="count">
            <blockquote class="layui-elem-quote">GOOD GOOD STUDY DAY DAY UP</blockquote>
            <fieldset class="layui-elem-field">
              <legend>信息统计</legend>
              <div class="layui-field-box">
                  <div class="echarts">
                      <div class="echartBox" id="main" style="width: 33%;height:400px;"></div>
                      <div class="echartBox" id="main2" style="width: 33%;height:400px;"></div>
                      <div class="echartBox" id="main3" style="width: 33%;height:400px;"></div>
                  </div>
                <table class="layui-table" lay-even>
                    <thead>
                        <tr>
                            <th>统计</th>
                            <th>资产列表</th>
                            <th>子域名</th>
                            <th>ip/端口</th>
                            <th>超链接</th>
                            <th>漏洞列表</th>
                            <th>厂商列表</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>总数</td>
                            <td>{{@count.assets.count}}</td>
                            <td>{{@count.subdomain.count}}</td>
                            <td>{{@count.port.count}}</td>
                            <td>{{@count.httpurl.count}}</td>
                            <td>{{@count.vuls.count}}</td>
                            <td>{{@count.companys.count}}</td>
                        </tr>
                        <tr>
                            <td>今日</td>
                            <td>{{@count.assets.day}}</td>
                            <td>{{@count.subdomain.day}}</td>
                            <td>{{@count.port.day}}</td>
                            <td>{{@count.httpurl.day}}</td>
                            <td>{{@count.vuls.day}}</td>
                            <td>{{@count.companys.day}}</td>
                        </tr>
                        <tr>
                            <td>本周</td>
                            <td>{{@count.assets.week}}</td>
                            <td>{{@count.subdomain.week}}</td>
                            <td>{{@count.port.week}}</td>
                            <td>{{@count.httpurl.week}}</td>
                            <td>{{@count.vuls.week}}</td>
                            <td>{{@count.companys.week}}</td>
                        </tr>
                        <tr>
                            <td>本月</td>
                            <td>{{@count.assets.mon}}</td>
                            <td>{{@count.subdomain.mon}}</td>
                            <td>{{@count.port.mon}}</td>
                            <td>{{@count.httpurl.mon}}</td>
                            <td>{{@count.vuls.mon}}</td>
                            <td>{{@count.companys.mon}}</td>
                        </tr>
                        <tr>
                            <td>本年</td>
                            <td>{{@count.assets.year}}</td>
                            <td>{{@count.subdomain.year}}</td>
                            <td>{{@count.port.year}}</td>
                            <td>{{@count.httpurl.year}}</td>
                            <td>{{@count.vuls.year}}</td>
                            <td>{{@count.companys.year}}</td>
                        </tr>
                    </tbody>
                </table>

                  <!--以下数据你需要就自己填，不需要就删掉-->
                <table class="layui-table">
                <thead>
                    <tr>
                        <th colspan="2" scope="col">服务器信息</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th width="30%">服务器计算机名</th>
                        <td><span id="lbServerName">http://127.0.0.1/</span></td>
                    </tr>
                    <tr>
                        <td>服务器IP地址</td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>服务器域名</td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>服务器端口 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>服务器IIS版本 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>本文件所在文件夹 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>服务器操作系统 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>系统所在文件夹 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>服务器脚本超时时间 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>服务器的语言种类 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>.NET Framework 版本 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>服务器当前时间 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>服务器IE版本 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>服务器上次启动到现在已运行 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>逻辑驱动器 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>CPU 总数 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>CPU 类型 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>虚拟内存 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>当前程序占用内存 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>Asp.net所占内存 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>当前Session数量 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>当前SessionID </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                    <tr>
                        <td>当前系统用户名 </td>
                        <td>需要就自己改，不要就自己删掉这块代码</td>
                    </tr>
                </tbody>
            </table>
                  <!--以上为可删掉数据部分-->



              </div>
            </fieldset>
            <blockquote class="layui-elem-quote layui-quote-nm">学海无涯</blockquote>
            
        </div>
        <script src="js/echarts.min.js"></script>
        <script src="js/avalon.js"></script>
        <script>
            avalon.config({debug:false})
            var vm = avalon.define({
                $id: 'count',
                count:{}
            })
            get('get_count',function (res) {
                if(res.code==200){
                    vm.count=res.data;
                }
            })



            var myChart = echarts.init(document.getElementById('main'));
            var myChart2 = echarts.init(document.getElementById('main2'));
            var myChart3 = echarts.init(document.getElementById('main3'));
            option = {
                tooltip : {
                    formatter: "{a} <br/>{b} : {c}%"
                },
                series: [
                    {
                        name: '系统内存使用情况',
                        type: 'gauge',
                        detail: {formatter:'{value}%'},
                        data: [{value: 0, name: '系统内存'}]
                    }
                ]
            };
            option2 = {
                tooltip : {
                    formatter: "{a} <br/>{b} : {c}%"
                },
                series: [
                    {
                        name: '系统CPU使用情况',
                        type: 'gauge',
                        detail: {formatter:'{value}%'},
                        data: [{value: 0, name: '系统CPU'}]
                    }
                ]
            };
            option3 = {
                tooltip : {
                    formatter: "{a} <br/>{b} : {c}%"
                },
                series: [
                    {
                        name: '系统硬盘使用情况',
                        type: 'gauge',
                        detail: {formatter:'{value}%'},
                        data: [{value: 0, name: '系统硬盘'}]
                    }
                ]
            };


                function getdata(){
                    get('get_sysinfo',function (res) {
                        if(res.code==200){
                            var data=res.data;
                            console.log(data)
                            option.series[0].data[0].value = data.disk.percent
                            option2.series[0].data[0].value = data.cpu.percent
                            option3.series[0].data[0].value = data.mem.percent
                            option.series[0].data[0].name = '系统内存-'+ data.disk.total
                            option2.series[0].data[0].name = '系统CPU-'+data.cpu.total
                            option3.series[0].data[0].name= '系统硬盘-'+data.mem.total
                        }
                    })
                }
            getdata()
            /****/
            window.onresize = function(){
                myChart.resize();
                myChart2.resize();
                myChart3.resize();
            }
            setInterval(function () {
                getdata()

                // 使用刚指定的配置项和数据显示图表。
                myChart.setOption(option);
                myChart2.setOption(option2);
                myChart3.setOption(option3);

            },2000);
        </script>
    </body>
</html>